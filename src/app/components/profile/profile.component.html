<div
    class="max-w-xl mx-auto bg-neutral-100 border border-gray-300 p-6 rounded-lg shadow-md">
    <h1 class="text-2xl font-bold mb-4 text-gray-900">Editar Perfil</h1>
    <p *ngIf="user" class="mb-4">Correo electrónico actual: <span
            class="font-bold underline underline-offset-4">{{ user.email
            }}</span></p>
    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
        <!-- Correo -->
        <div class="mb-4">
            <label for="email"
                class="block text-sm font-medium text-gray-700 mb-1">Correo
                Electrónico</label>
            <input
                type="email"
                id="email"
                formControlName="email"
                class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black" />
            <div
                *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched"
                class="text-red-500 text-sm">
                <p *ngIf="profileForm.get('email')?.hasError('email')">El correo
                    no es válido.</p>
            </div>
        </div>

        <!-- Nueva Contraseña -->
        <div class="mb-4">
            <label for="password"
                class="block text-sm font-medium text-gray-700 mb-1">Nueva
                Contraseña</label>
            <input
                type="password"
                id="password"
                formControlName="password"
                class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black" />
            <div
                *ngIf="profileForm.get('password')?.invalid && profileForm.get('password')?.touched"
                class="text-red-500 text-sm">
                <p *ngIf="profileForm.get('password')?.hasError('minlength')">La
                    contraseña debe tener al menos 6 caracteres.</p>
            </div>
        </div>

        <!-- Contraseña Actual -->
        <div class="mb-4">
            <label for="currentPassword"
                class="block text-sm font-medium text-gray-700 mb-1">Contraseña
                Actual</label>
            <input
                type="password"
                id="currentPassword"
                formControlName="currentPassword"
                class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black" />
            <div
                *ngIf="profileForm.get('currentPassword')?.invalid && profileForm.get('currentPassword')?.touched"
                class="text-red-500 text-sm">
                <p
                    *ngIf="profileForm.get('currentPassword')?.hasError('required')">La
                    contraseña actual es obligatoria.</p>
            </div>
            <div *ngIf="currentPasswordError" class="text-red-500 text-sm mt-1">
                {{ currentPasswordError }}
            </div>
        </div>

        <!-- Botón -->
        <button
            type="submit"
            [disabled]="profileForm.invalid"
            class="w-full bg-black text-white py-2.5 rounded-lg hover:bg-gray-800 hover:scale-102 cursor-pointer transition duration-300">
            Guardar Cambios
        </button>
    </form>

    <!-- Modal -->
    <app-modal [message]="updateMessage ?? ''" [show]="showModal"
        (close)="closeModal()"></app-modal>
</div>